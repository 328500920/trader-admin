# 交易术语词典 - 需求说明书与设计文档

## 一、需求背景

### 1.1 问题分析
- 新手交易者看不懂专业术语，学习门槛高
- 术语分散在各处，没有统一的查询入口
- 缺乏术语与实际应用场景的关联
- 不同平台术语表述不一致，容易混淆

### 1.2 目标用户
- 初级交易者：需要快速了解基础术语
- 中级交易者：需要深入理解高级概念
- 所有交易者：需要随时查阅不熟悉的术语

### 1.3 核心价值
- **降低门槛**：帮助新手快速入门
- **随时查阅**：遇到不懂的术语可以快速查询
- **关联学习**：术语与课程内容关联，深入学习

---

## 二、功能需求

### 2.1 功能清单

| 功能模块 | 功能点 | 优先级 |
|---------|--------|--------|
| 术语浏览 | 术语分类列表 | P0 |
| 术语浏览 | 术语详情页 | P0 |
| 术语搜索 | 关键词搜索 | P0 |
| 术语搜索 | 拼音/首字母搜索 | P1 |
| 术语管理 | 收藏术语 | P1 |
| 术语管理 | 最近查看 | P1 |
| 关联功能 | 关联学习课程 | P2 |
| 关联功能 | 相关术语推荐 | P2 |
| 管理后台 | 术语增删改查 | P1 |

### 2.2 术语分类

```
📊 技术分析
├── K线形态
├── 技术指标
├── 图表形态
├── 趋势分析
└── 支撑阻力

📈 交易操作
├── 订单类型
├── 仓位管理
├── 杠杆交易
├── 合约交易
└── 风险控制

💰 市场数据
├── 价格指标
├── 成交量
├── 资金流向
├── 持仓数据
└── 情绪指标

🔗 链上数据
├── 钱包地址
├── 交易所数据
├── DeFi指标
└── 巨鲸追踪

📰 基本面
├── 宏观经济
├── 项目分析
├── 监管政策
└── 行业事件

🧠 交易心理
├── 心理偏差
├── 情绪管理
├── 交易纪律
└── 风险认知
```

### 2.3 术语字段

| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| 术语名称 | 文本 | 是 | 中文名称 |
| 英文名称 | 文本 | 否 | 英文/缩写 |
| 分类 | 选择 | 是 | 所属分类 |
| 简短定义 | 文本 | 是 | 一句话解释 |
| 详细解释 | 富文本 | 是 | 详细说明 |
| 应用场景 | 富文本 | 否 | 实际使用场景 |
| 示例 | 富文本 | 否 | 具体例子 |
| 相关术语 | 多选 | 否 | 关联的其他术语 |
| 关联课程 | 多选 | 否 | 关联的学习章节 |
| 难度等级 | 单选 | 是 | 入门/进阶/高级 |
| 标签 | 多选 | 否 | 搜索标签 |

---

## 三、术语内容示例

### 3.1 入门级术语

#### OI（Open Interest / 未平仓合约）

**分类**: 市场数据 > 持仓数据

**简短定义**: 市场上所有未平仓的合约总数

**详细解释**:
OI（Open Interest）即未平仓合约数，表示市场上所有尚未平仓的多头和空头合约总和。它是衡量市场参与度和流动性的重要指标。

**计算方式**:
- 新开仓：OI 增加
- 平仓：OI 减少
- 换手（一方平仓，另一方开仓）：OI 不变

**应用场景**:
1. **判断趋势强度**
   - 价格上涨 + OI 上涨 = 趋势强劲
   - 价格上涨 + OI 下降 = 趋势可能反转

2. **识别市场情绪**
   - OI 快速增加 = 新资金入场
   - OI 快速减少 = 资金离场

**示例**:
BTC 价格从 90,000 涨到 95,000，同时 OI 从 20 亿增加到 25 亿，说明有大量新资金做多入场，上涨趋势可能延续。

**相关术语**: 资金费率、多空比、清算

**难度等级**: 入门

---

#### 资金费率（Funding Rate）

**分类**: 市场数据 > 价格指标

**简短定义**: 永续合约多空双方定期支付的费用，用于锚定现货价格

**详细解释**:
资金费率是永续合约特有的机制，每隔一段时间（通常8小时）多空双方互相支付费用，目的是让合约价格贴近现货价格。

**计算规则**:
- 资金费率 > 0：多头支付给空头（市场偏多）
- 资金费率 < 0：空头支付给多头（市场偏空）
- 费率越高，说明市场情绪越极端

**应用场景**:
1. **判断市场情绪**
   - 费率持续为正且较高 = 市场过热，可能回调
   - 费率持续为负 = 市场恐慌，可能反弹

2. **套利策略**
   - 高费率时可做空合约 + 做多现货

**示例**:
BTC 资金费率达到 0.1%（8小时），意味着做多需要每8小时支付 0.1% 的费用，年化成本约 109%，市场极度过热。

**相关术语**: OI、永续合约、现货溢价

**难度等级**: 入门

---

### 3.2 进阶级术语

#### MACD 背离

**分类**: 技术分析 > 技术指标

**简短定义**: 价格走势与 MACD 指标走势相反，预示趋势可能反转

**详细解释**:
MACD 背离分为顶背离和底背离：

**顶背离**:
- 价格创新高，但 MACD 没有创新高
- 预示上涨动能减弱，可能下跌

**底背离**:
- 价格创新低，但 MACD 没有创新低
- 预示下跌动能减弱，可能上涨

**注意事项**:
1. 背离只是预警信号，不是入场信号
2. 需要配合其他指标确认
3. 大级别背离比小级别更可靠
4. 背离可能持续多次才反转

**应用场景**:
1. 趋势末端识别
2. 配合支撑阻力位入场
3. 止盈信号参考

**示例**:
BTC 在 4H 级别，价格从 95,000 涨到 98,000 再到 100,000，但 MACD 的高点依次降低，形成顶背离，随后价格回落至 92,000。

**相关术语**: MACD、RSI 背离、趋势反转

**难度等级**: 进阶

---

### 3.3 高级术语

#### 清算地图（Liquidation Heatmap）

**分类**: 市场数据 > 持仓数据

**简短定义**: 显示不同价格位置潜在清算量的可视化图表

**详细解释**:
清算地图通过分析市场上的杠杆仓位，预测在不同价格点位可能触发的清算量。大量清算往往会加速价格波动。

**原理**:
1. 交易所公开的持仓数据
2. 根据杠杆倍数计算清算价格
3. 聚合显示各价位的清算量

**应用场景**:
1. **识别流动性区域**
   - 清算量大的区域是"磁铁"
   - 价格倾向于扫向这些区域

2. **止损设置**
   - 避免将止损设在清算密集区
   - 或利用清算区域作为目标位

3. **判断短期方向**
   - 上方清算量大 = 可能向上扫
   - 下方清算量大 = 可能向下扫

**示例**:
清算地图显示 BTC 在 92,000 下方有 5 亿美元的多头清算量，价格从 94,000 快速下跌至 91,500，触发连环清算后反弹。

**相关术语**: 清算、杠杆、止损猎杀

**难度等级**: 高级

---

## 四、页面设计

### 4.1 页面结构

```
/glossary                # 术语词典首页
/glossary/category/:id   # 分类列表页
/glossary/term/:id       # 术语详情页
/glossary/search         # 搜索结果页
/glossary/favorites      # 我的收藏
```

### 4.2 术语词典首页

```
┌─────────────────────────────────────────────────────────┐
│  📖 交易术语词典                                        │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌─ 搜索 ─────────────────────────────────────────┐    │
│  │ 🔍 [搜索术语、拼音或首字母...              ]   │    │
│  └────────────────────────────────────────────────┘    │
│                                                         │
│  ┌─ 热门术语 ─────────────────────────────────────┐    │
│  │ [OI] [资金费率] [MACD] [RSI] [止损] [杠杆]     │    │
│  │ [清算] [多空比] [K线] [支撑位] [阻力位]        │    │
│  └────────────────────────────────────────────────┘    │
│                                                         │
│  ┌─ 术语分类 ─────────────────────────────────────┐    │
│  │                                                │    │
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐     │    │
│  │  │ 📊       │  │ 📈       │  │ 💰       │     │    │
│  │  │ 技术分析 │  │ 交易操作 │  │ 市场数据 │     │    │
│  │  │ 45个术语 │  │ 32个术语 │  │ 28个术语 │     │    │
│  │  └──────────┘  └──────────┘  └──────────┘     │    │
│  │                                                │    │
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐     │    │
│  │  │ 🔗       │  │ 📰       │  │ 🧠       │     │    │
│  │  │ 链上数据 │  │ 基本面   │  │ 交易心理 │     │    │
│  │  │ 18个术语 │  │ 15个术语 │  │ 12个术语 │     │    │
│  │  └──────────┘  └──────────┘  └──────────┘     │    │
│  │                                                │    │
│  └────────────────────────────────────────────────┘    │
│                                                         │
│  ┌─ 最近查看 ─────────────────────────────────────┐    │
│  │ • 资金费率 - 2分钟前                           │    │
│  │ • OI（未平仓合约）- 1小时前                    │    │
│  │ • MACD背离 - 昨天                              │    │
│  └────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────┘
```

### 4.3 分类列表页

```
┌─────────────────────────────────────────────────────────┐
│  ← 返回  📊 技术分析                    [入门] [进阶]   │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌─ 子分类 ─────────────────────────────────────────┐  │
│  │ [全部] [K线形态] [技术指标] [图表形态] [趋势]    │  │
│  └──────────────────────────────────────────────────┘  │
│                                                         │
│  ┌─ 术语列表 ───────────────────────────────────────┐  │
│  │                                                  │  │
│  │  ┌────────────────────────────────────────────┐ │  │
│  │  │ K线（Candlestick）                  入门 ⭐ │ │  │
│  │  │ 显示开盘价、收盘价、最高价、最低价的图表   │ │  │
│  │  └────────────────────────────────────────────┘ │  │
│  │                                                  │  │
│  │  ┌────────────────────────────────────────────┐ │  │
│  │  │ 锤子线（Hammer）                    入门    │ │  │
│  │  │ 下影线长、实体小的K线，出现在下跌末端      │ │  │
│  │  └────────────────────────────────────────────┘ │  │
│  │                                                  │  │
│  │  ┌────────────────────────────────────────────┐ │  │
│  │  │ MACD                                进阶    │ │  │
│  │  │ 指数平滑异同移动平均线，判断趋势和动能     │ │  │
│  │  └────────────────────────────────────────────┘ │  │
│  │                                                  │  │
│  │  ...                                            │  │
│  └──────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────┘
```

### 4.4 术语详情页

```
┌─────────────────────────────────────────────────────────┐
│  ← 返回                                    [⭐ 收藏]    │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │                                                 │   │
│  │  OI（Open Interest）                           │   │
│  │  未平仓合约                                    │   │
│  │                                                 │   │
│  │  [市场数据] [持仓数据] [入门]                  │   │
│  │                                                 │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─ 定义 ─────────────────────────────────────────┐    │
│  │ 市场上所有未平仓的合约总数，是衡量市场参与度   │    │
│  │ 和流动性的重要指标。                           │    │
│  └────────────────────────────────────────────────┘    │
│                                                         │
│  ┌─ 详细解释 ─────────────────────────────────────┐    │
│  │ OI（Open Interest）即未平仓合约数...           │    │
│  │                                                │    │
│  │ 计算方式：                                     │    │
│  │ • 新开仓：OI 增加                              │    │
│  │ • 平仓：OI 减少                                │    │
│  │ • 换手：OI 不变                                │    │
│  └────────────────────────────────────────────────┘    │
│                                                         │
│  ┌─ 应用场景 ─────────────────────────────────────┐    │
│  │ 1. 判断趋势强度                                │    │
│  │    • 价格上涨 + OI 上涨 = 趋势强劲             │    │
│  │    • 价格上涨 + OI 下降 = 趋势可能反转         │    │
│  │                                                │    │
│  │ 2. 识别市场情绪                                │    │
│  │    • OI 快速增加 = 新资金入场                  │    │
│  │    • OI 快速减少 = 资金离场                    │    │
│  └────────────────────────────────────────────────┘    │
│                                                         │
│  ┌─ 示例 ─────────────────────────────────────────┐    │
│  │ BTC 价格从 90,000 涨到 95,000，同时 OI 从      │    │
│  │ 20 亿增加到 25 亿，说明有大量新资金做多入场... │    │
│  └────────────────────────────────────────────────┘    │
│                                                         │
│  ┌─ 相关术语 ─────────────────────────────────────┐    │
│  │ [资金费率] [多空比] [清算] [永续合约]          │    │
│  └────────────────────────────────────────────────┘    │
│                                                         │
│  ┌─ 关联课程 ─────────────────────────────────────┐    │
│  │ 📚 第8周：市场情绪与数据分析                   │    │
│  └────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────┘
```

---

## 五、数据库设计

### 5.1 术语分类表 (glossary_category)

```sql
CREATE TABLE glossary_category (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(50) NOT NULL COMMENT '分类名称',
    icon VARCHAR(50) COMMENT '图标',
    parent_id BIGINT DEFAULT 0 COMMENT '父分类ID',
    sort_order INT DEFAULT 0 COMMENT '排序',
    status TINYINT DEFAULT 1 COMMENT '状态: 1启用 0禁用',
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    
    INDEX idx_parent_id (parent_id)
) COMMENT '术语分类表';
```

### 5.2 术语表 (glossary_term)

```sql
CREATE TABLE glossary_term (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    
    -- 基础信息
    name VARCHAR(100) NOT NULL COMMENT '术语名称',
    name_en VARCHAR(100) COMMENT '英文名称',
    category_id BIGINT NOT NULL COMMENT '分类ID',
    
    -- 内容
    brief TEXT NOT NULL COMMENT '简短定义',
    detail TEXT COMMENT '详细解释(Markdown)',
    application TEXT COMMENT '应用场景(Markdown)',
    example TEXT COMMENT '示例(Markdown)',
    
    -- 关联
    related_terms VARCHAR(500) COMMENT '相关术语ID(JSON数组)',
    related_chapters VARCHAR(500) COMMENT '关联课程章节ID(JSON数组)',
    
    -- 属性
    difficulty TINYINT DEFAULT 1 COMMENT '难度: 1入门 2进阶 3高级',
    tags VARCHAR(200) COMMENT '标签(JSON数组)',
    pinyin VARCHAR(200) COMMENT '拼音(用于搜索)',
    
    -- 统计
    view_count INT DEFAULT 0 COMMENT '查看次数',
    favorite_count INT DEFAULT 0 COMMENT '收藏次数',
    
    -- 系统字段
    status TINYINT DEFAULT 1 COMMENT '状态: 1启用 0禁用',
    create_by BIGINT COMMENT '创建人',
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    INDEX idx_category_id (category_id),
    INDEX idx_difficulty (difficulty),
    FULLTEXT INDEX ft_search (name, name_en, brief, tags)
) COMMENT '术语表';
```

### 5.3 用户收藏表 (glossary_favorite)

```sql
CREATE TABLE glossary_favorite (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    user_id BIGINT NOT NULL COMMENT '用户ID',
    term_id BIGINT NOT NULL COMMENT '术语ID',
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    
    UNIQUE KEY uk_user_term (user_id, term_id),
    INDEX idx_user_id (user_id)
) COMMENT '术语收藏表';
```

### 5.4 查看历史表 (glossary_history)

```sql
CREATE TABLE glossary_history (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    user_id BIGINT NOT NULL COMMENT '用户ID',
    term_id BIGINT NOT NULL COMMENT '术语ID',
    view_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '查看时间',
    
    INDEX idx_user_id (user_id),
    INDEX idx_view_time (view_time)
) COMMENT '术语查看历史表';
```

---

## 六、接口设计

### 6.1 接口列表

| 方法 | 路径 | 说明 |
|------|------|------|
| GET | /api/glossary/category | 获取分类列表 |
| GET | /api/glossary/term | 获取术语列表 |
| GET | /api/glossary/term/:id | 获取术语详情 |
| GET | /api/glossary/search | 搜索术语 |
| GET | /api/glossary/hot | 获取热门术语 |
| POST | /api/glossary/favorite/:id | 收藏/取消收藏 |
| GET | /api/glossary/favorite | 获取收藏列表 |
| GET | /api/glossary/history | 获取查看历史 |

### 6.2 搜索接口

**请求**
```
GET /api/glossary/search?keyword=资金&difficulty=1
```

**响应**
```json
{
    "code": 200,
    "data": {
        "list": [
            {
                "id": 1,
                "name": "资金费率",
                "nameEn": "Funding Rate",
                "brief": "永续合约多空双方定期支付的费用",
                "categoryName": "市场数据",
                "difficulty": 1
            },
            {
                "id": 2,
                "name": "资金管理",
                "nameEn": "Money Management",
                "brief": "控制交易资金分配和风险的方法",
                "categoryName": "交易操作",
                "difficulty": 1
            }
        ],
        "total": 2
    }
}
```

---

## 七、初始数据

### 7.1 分类数据

```sql
INSERT INTO glossary_category (name, icon, parent_id, sort_order) VALUES
('技术分析', 'TrendCharts', 0, 1),
('交易操作', 'Operation', 0, 2),
('市场数据', 'DataLine', 0, 3),
('链上数据', 'Link', 0, 4),
('基本面', 'Document', 0, 5),
('交易心理', 'User', 0, 6);

-- 子分类
INSERT INTO glossary_category (name, parent_id, sort_order) VALUES
('K线形态', 1, 1),
('技术指标', 1, 2),
('图表形态', 1, 3),
('趋势分析', 1, 4),
('支撑阻力', 1, 5);
```

### 7.2 术语数据（示例）

```sql
INSERT INTO glossary_term (name, name_en, category_id, brief, detail, difficulty, tags, pinyin) VALUES
('OI', 'Open Interest', 3, '市场上所有未平仓的合约总数', '...详细内容...', 1, '["合约","持仓","市场数据"]', 'OI'),
('资金费率', 'Funding Rate', 3, '永续合约多空双方定期支付的费用', '...详细内容...', 1, '["合约","费率","永续"]', 'zijinfeilv'),
('MACD', 'Moving Average Convergence Divergence', 1, '指数平滑异同移动平均线', '...详细内容...', 2, '["指标","趋势","动能"]', 'MACD'),
('清算', 'Liquidation', 2, '因保证金不足被强制平仓', '...详细内容...', 1, '["合约","风险","杠杆"]', 'qingsuan');
```

---

## 八、后续迭代

### 8.1 V2 功能
- 术语卡片学习模式（类似背单词）
- 术语测验功能
- 用户贡献术语（审核后发布）

### 8.2 V3 功能
- 术语语音朗读
- 多语言支持
- AI 术语问答
