-- 导入学习课程数据
-- 基于已有的MD文档内容

USE trader_db;

-- 阶段一：基础构建期
INSERT INTO learn_course (title, description, stage, sort_order, status, create_by) VALUES 
('阶段一：基础构建期', '第1-8周，建立交易基础知识体系，包括K线技术、技术指标、基本面分析等', 1, 1, 1, 1);

SET @course1_id = LAST_INSERT_ID();

INSERT INTO learn_chapter (course_id, title, week_number, sort_order, status, content) VALUES 
(@course1_id, '第1周：K线基础与市场认知', 1, 1, 1, '## 学习目标
- 理解K线的基本构成（开盘价、收盘价、最高价、最低价）
- 掌握常见K线形态（锤子线、十字星、吞没形态等）
- 了解数字货币市场的基本特点

## 学习内容
### K线基础
- K线的四个价格要素
- 阳线与阴线的含义
- 实体与影线的意义

### 常见K线形态
- 单根K线形态：锤子线、上吊线、十字星
- 双K线形态：吞没形态、孕线形态
- 三K线形态：早晨之星、黄昏之星

## 实践任务
- [ ] 在TradingView上观察BTC日线图，识别至少10种K线形态
- [ ] 记录每种形态出现后的价格走势
- [ ] 总结K线形态的成功率'),

(@course1_id, '第2周：支撑阻力与趋势线', 2, 2, 1, '## 学习目标
- 掌握支撑位和阻力位的识别方法
- 学会绘制趋势线
- 理解趋势的三种类型

## 学习内容
### 支撑与阻力
- 支撑位的形成原理
- 阻力位的形成原理
- 支撑阻力的转换

### 趋势线
- 上升趋势线的绘制
- 下降趋势线的绘制
- 趋势线的有效性判断

## 实践任务
- [ ] 在BTC/ETH图表上标注关键支撑阻力位
- [ ] 绘制当前的趋势线
- [ ] 记录价格触及支撑阻力时的反应'),

(@course1_id, '第3周：移动平均线系统', 3, 3, 1, '## 学习目标
- 理解移动平均线的计算原理
- 掌握常用均线周期的选择
- 学会使用均线判断趋势

## 学习内容
### 移动平均线基础
- SMA与EMA的区别
- 常用均线周期：7/20/50/100/200
- 均线的滞后性

### 均线交易策略
- 金叉与死叉
- 均线支撑与阻力
- 多均线系统

## 实践任务
- [ ] 设置20/50/200均线组合
- [ ] 观察均线金叉死叉后的走势
- [ ] 统计均线策略的胜率'),

(@course1_id, '第4周：MACD指标深度学习', 4, 4, 1, '## 学习目标
- 理解MACD的计算原理
- 掌握MACD的各种信号
- 学会MACD与价格的背离分析

## 学习内容
### MACD基础
- DIF线与DEA线
- MACD柱状图
- 零轴的意义

### MACD信号
- 金叉与死叉
- 零轴上下的意义
- 顶背离与底背离

## 实践任务
- [ ] 找出近期BTC的MACD背离案例
- [ ] 记录MACD信号的准确率
- [ ] 结合K线形态验证MACD信号'),

(@course1_id, '第5周：RSI与布林带', 5, 5, 1, '## 学习目标
- 掌握RSI指标的使用
- 理解布林带的原理和应用
- 学会超买超卖的判断

## 学习内容
### RSI指标
- RSI的计算方法
- 超买超卖区域
- RSI背离

### 布林带
- 布林带的三条线
- 布林带收窄与扩张
- 布林带突破策略

## 实践任务
- [ ] 观察RSI在70/30区域的价格反应
- [ ] 记录布林带收窄后的突破方向
- [ ] 结合RSI和布林带制定交易计划'),

(@course1_id, '第6周：成交量分析', 6, 6, 1, '## 学习目标
- 理解成交量的重要性
- 掌握量价关系分析
- 学会识别异常成交量

## 学习内容
### 成交量基础
- 成交量的意义
- 量价配合原则
- 缩量与放量

### 量价分析
- 上涨放量的含义
- 下跌缩量的含义
- 天量与地量

## 实践任务
- [ ] 分析BTC重要转折点的成交量特征
- [ ] 记录量价背离的案例
- [ ] 总结成交量对趋势的验证作用'),

(@course1_id, '第7周：基本面与消息面分析', 7, 7, 1, '## 学习目标
- 了解影响加密货币的宏观因素
- 掌握重要经济数据的解读
- 学会评估消息面的影响

## 学习内容
### 宏观经济因素
- 美联储政策对加密货币的影响
- 美元指数(DXY)与BTC的关系
- 美股与加密货币的联动

### 消息面分析
- 监管政策的影响
- 项目基本面评估
- 市场情绪指标

## 实践任务
- [ ] 关注本周重要经济数据发布
- [ ] 记录消息发布后的市场反应
- [ ] 建立自己的消息面分析框架'),

(@course1_id, '第8周：链上数据入门', 8, 8, 1, '## 学习目标
- 了解链上数据的类型
- 掌握常用链上指标
- 学会使用链上数据辅助决策

## 学习内容
### 链上数据基础
- 交易所流入流出
- 巨鲸地址追踪
- 活跃地址数

### 常用链上指标
- MVRV比率
- SOPR指标
- 矿工持仓变化

## 实践任务
- [ ] 注册Glassnode/CryptoQuant账号
- [ ] 观察交易所净流入流出数据
- [ ] 记录链上数据与价格的关系');

-- 为第一阶段添加学习任务
INSERT INTO learn_task (chapter_id, task_content, sort_order) 
SELECT id, '完成本周学习内容阅读', 1 FROM learn_chapter WHERE course_id = @course1_id;

INSERT INTO learn_task (chapter_id, task_content, sort_order) 
SELECT id, '完成实践任务', 2 FROM learn_chapter WHERE course_id = @course1_id;

INSERT INTO learn_task (chapter_id, task_content, sort_order) 
SELECT id, '记录学习笔记', 3 FROM learn_chapter WHERE course_id = @course1_id;

-- 阶段二：策略整合与实战期
INSERT INTO learn_course (title, description, stage, sort_order, status, create_by) VALUES 
('阶段二：策略整合与实战期', '第9-16周，整合所学知识，建立交易系统，开始模拟实战', 2, 2, 1, 1);

SET @course2_id = LAST_INSERT_ID();

INSERT INTO learn_chapter (course_id, title, week_number, sort_order, status, content) VALUES 
(@course2_id, '第9周：交易系统构建', 9, 1, 1, '## 学习目标
- 理解交易系统的组成要素
- 设计自己的交易规则
- 建立入场和出场标准

## 学习内容
### 交易系统要素
- 市场选择
- 入场信号
- 出场信号
- 仓位管理
- 风险控制

### 系统设计原则
- 简单有效
- 可执行性
- 可量化

## 实践任务
- [ ] 写出自己的交易系统规则
- [ ] 定义明确的入场条件
- [ ] 定义明确的出场条件'),

(@course2_id, '第10周：风险管理基础', 10, 2, 1, '## 学习目标
- 理解风险管理的重要性
- 掌握仓位计算方法
- 学会设置止损止盈

## 学习内容
### 风险管理原则
- 单笔风险控制在1-2%
- 总仓位控制
- 相关性风险

### 仓位计算
- 固定金额法
- 固定比例法
- 凯利公式

## 实践任务
- [ ] 计算自己的单笔最大风险金额
- [ ] 制定仓位管理规则
- [ ] 设计止损止盈策略'),

(@course2_id, '第11周：趋势跟随策略', 11, 3, 1, '## 学习目标
- 掌握趋势跟随的核心理念
- 学会识别趋势的开始和结束
- 建立趋势跟随交易系统

## 学习内容
### 趋势跟随原理
- 趋势的定义
- 趋势的持续性
- 顺势而为

### 趋势跟随策略
- 均线突破策略
- 通道突破策略
- 动量策略

## 实践任务
- [ ] 回测趋势跟随策略
- [ ] 记录策略的胜率和盈亏比
- [ ] 优化策略参数'),

(@course2_id, '第12周：震荡交易策略', 12, 4, 1, '## 学习目标
- 识别震荡市场
- 掌握区间交易方法
- 学会在震荡中获利

## 学习内容
### 震荡市场特征
- 价格在区间内波动
- 成交量萎缩
- 指标钝化

### 震荡交易策略
- 支撑阻力交易
- 布林带回归策略
- RSI超买超卖策略

## 实践任务
- [ ] 识别当前市场是趋势还是震荡
- [ ] 在震荡区间内模拟交易
- [ ] 记录震荡策略的表现'),

(@course2_id, '第13周：突破交易策略', 13, 5, 1, '## 学习目标
- 识别有效突破
- 过滤假突破
- 建立突破交易系统

## 学习内容
### 突破类型
- 水平突破
- 趋势线突破
- 形态突破

### 突破确认
- 成交量确认
- 收盘价确认
- 回踩确认

## 实践任务
- [ ] 找出近期的突破案例
- [ ] 分析突破成功和失败的原因
- [ ] 制定突破交易规则'),

(@course2_id, '第14周：多时间框架分析', 14, 6, 1, '## 学习目标
- 理解多时间框架的意义
- 学会从大到小分析
- 建立多周期交易系统

## 学习内容
### 时间框架选择
- 周线定方向
- 日线找机会
- 4小时精确入场

### 多周期共振
- 趋势一致性
- 信号共振
- 时间周期配合

## 实践任务
- [ ] 分析BTC的周线、日线、4小时图
- [ ] 找出多周期共振的交易机会
- [ ] 记录多周期分析的效果'),

(@course2_id, '第15周：交易心理学', 15, 7, 1, '## 学习目标
- 认识常见的交易心理陷阱
- 学会控制情绪
- 建立正确的交易心态

## 学习内容
### 常见心理陷阱
- 贪婪与恐惧
- 过度交易
- 报复性交易
- 确认偏误

### 心理控制方法
- 交易日志
- 冥想与放松
- 规则化交易

## 实践任务
- [ ] 记录每笔交易时的情绪状态
- [ ] 识别自己的心理弱点
- [ ] 制定情绪管理计划'),

(@course2_id, '第16周：模拟交易实战', 16, 8, 1, '## 学习目标
- 在模拟环境中验证策略
- 积累交易经验
- 完善交易系统

## 学习内容
### 模拟交易要点
- 像真实交易一样对待
- 严格执行规则
- 详细记录每笔交易

### 交易复盘
- 每日复盘
- 每周总结
- 策略优化

## 实践任务
- [ ] 完成至少20笔模拟交易
- [ ] 计算策略的实际表现
- [ ] 总结需要改进的地方');

-- 为第二阶段添加学习任务
INSERT INTO learn_task (chapter_id, task_content, sort_order) 
SELECT id, '完成本周学习内容阅读', 1 FROM learn_chapter WHERE course_id = @course2_id;

INSERT INTO learn_task (chapter_id, task_content, sort_order) 
SELECT id, '完成实践任务', 2 FROM learn_chapter WHERE course_id = @course2_id;

INSERT INTO learn_task (chapter_id, task_content, sort_order) 
SELECT id, '记录学习笔记', 3 FROM learn_chapter WHERE course_id = @course2_id;

-- 阶段三：进阶与稳定期
INSERT INTO learn_course (title, description, stage, sort_order, status, create_by) VALUES 
('阶段三：进阶与稳定期', '第17-24周，实盘交易，持续优化，追求稳定盈利', 3, 3, 1, 1);

SET @course3_id = LAST_INSERT_ID();

INSERT INTO learn_chapter (course_id, title, week_number, sort_order, status, content) VALUES 
(@course3_id, '第17周：小资金实盘开始', 17, 1, 1, '## 学习目标
- 从模拟过渡到实盘
- 控制初始资金规模
- 适应真实市场环境

## 学习内容
### 实盘准备
- 资金规划
- 心理准备
- 风险预案

### 小资金策略
- 降低仓位
- 减少交易频率
- 专注执行

## 实践任务
- [ ] 投入不超过总资金10%开始实盘
- [ ] 严格执行已验证的策略
- [ ] 记录实盘与模拟的差异'),

(@course3_id, '第18周：交易日志深度分析', 18, 2, 1, '## 学习目标
- 建立完善的交易日志系统
- 学会从日志中发现问题
- 持续改进交易表现

## 学习内容
### 交易日志要素
- 入场理由
- 出场理由
- 情绪状态
- 市场环境

### 日志分析方法
- 统计分析
- 模式识别
- 问题诊断

## 实践任务
- [ ] 完善交易日志模板
- [ ] 分析过去一个月的交易记录
- [ ] 找出最大的改进点'),

(@course3_id, '第19周：高级技术分析', 19, 3, 1, '## 学习目标
- 学习高级图表形态
- 掌握斐波那契工具
- 理解市场结构

## 学习内容
### 高级形态
- 头肩顶/底
- 双顶/双底
- 三角形态
- 旗形与楔形

### 斐波那契工具
- 回撤位
- 扩展位
- 时间周期

## 实践任务
- [ ] 识别当前市场的图表形态
- [ ] 使用斐波那契工具分析
- [ ] 结合形态制定交易计划'),

(@course3_id, '第20周：市场情绪深度分析', 20, 4, 1, '## 学习目标
- 深入理解市场情绪
- 掌握情绪指标的使用
- 学会逆向思维

## 学习内容
### 情绪指标
- 恐惧贪婪指数
- 资金费率
- 多空比
- 社交媒体情绪

### 逆向交易
- 极端情绪的识别
- 逆向交易时机
- 风险控制

## 实践任务
- [ ] 每日记录市场情绪指标
- [ ] 分析情绪与价格的关系
- [ ] 尝试在极端情绪时逆向交易'),

(@course3_id, '第21周：资金管理进阶', 21, 5, 1, '## 学习目标
- 学习高级资金管理技术
- 理解复利的力量
- 建立长期盈利思维

## 学习内容
### 高级资金管理
- 金字塔加仓
- 分批止盈
- 动态仓位调整

### 复利增长
- 复利计算
- 回撤控制
- 长期目标设定

## 实践任务
- [ ] 计算不同复利率下的资金增长
- [ ] 制定资金增长计划
- [ ] 设定合理的收益目标'),

(@course3_id, '第22周：交易系统优化', 22, 6, 1, '## 学习目标
- 评估交易系统表现
- 识别优化方向
- 避免过度优化

## 学习内容
### 系统评估指标
- 胜率
- 盈亏比
- 最大回撤
- 夏普比率

### 优化方法
- 参数优化
- 规则优化
- 过滤条件优化

## 实践任务
- [ ] 计算系统的各项指标
- [ ] 识别系统的弱点
- [ ] 进行有针对性的优化'),

(@course3_id, '第23周：多策略组合', 23, 7, 1, '## 学习目标
- 理解策略组合的意义
- 学会策略相关性分析
- 建立多策略交易系统

## 学习内容
### 策略组合原理
- 分散风险
- 平滑收益曲线
- 适应不同市场

### 组合构建
- 策略相关性
- 资金分配
- 动态调整

## 实践任务
- [ ] 分析已有策略的相关性
- [ ] 设计策略组合方案
- [ ] 测试组合的表现'),

(@course3_id, '第24周：总结与展望', 24, 8, 1, '## 学习目标
- 回顾半年学习成果
- 总结交易经验
- 制定未来发展计划

## 学习内容
### 学习总结
- 知识体系回顾
- 技能掌握评估
- 交易表现分析

### 未来规划
- 持续学习方向
- 资金规模扩展
- 长期职业规划

## 实践任务
- [ ] 写一份半年学习总结
- [ ] 分析自己的交易数据
- [ ] 制定下一阶段的目标');

-- 为第三阶段添加学习任务
INSERT INTO learn_task (chapter_id, task_content, sort_order) 
SELECT id, '完成本周学习内容阅读', 1 FROM learn_chapter WHERE course_id = @course3_id;

INSERT INTO learn_task (chapter_id, task_content, sort_order) 
SELECT id, '完成实践任务', 2 FROM learn_chapter WHERE course_id = @course3_id;

INSERT INTO learn_task (chapter_id, task_content, sort_order) 
SELECT id, '记录学习笔记', 3 FROM learn_chapter WHERE course_id = @course3_id;

INSERT INTO learn_task (chapter_id, task_content, sort_order) 
SELECT id, '完成本周交易复盘', 4 FROM learn_chapter WHERE course_id = @course3_id;
